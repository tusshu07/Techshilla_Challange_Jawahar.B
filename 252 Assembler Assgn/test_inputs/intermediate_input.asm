Line	Address	Label	OPCODE	OPERAND	Comment
5	00000	0	COPY	START	0	
10	00000	0	FIRST	STL	RETADR	
15	00003	0	CLOOP	JSUB	RDREC	
20	00006	0		LDA	LENGTH	
25	00009	0		COMP	#0	
30	0000C	0		JEQ	ENDFIL	
35	0000F	0		JSUB	WRREC	
40	00012	0		J	CLOOP	
45	00015	0	ENDFIL	LDA	=C'EOF'	
50	00018	0		STA	BUFFER	
55	0001B	0		LDA	#3	
60	0001E	0		STA	LENGTH	
65	00021	0		JSUB	WRREC	
70	00024	0		J	@RETADR	
75	00000	1		USE	CDATA	
80	00000	1	RETADR	RESW	1	
85	00003	1	LENGTH	RESW	1	
90	00000	2		USE	CBLKS	
95	00000	2	BUFFER	RESB	4096	
100	01000	2	BUFFEND	EQU	*	
105	01000	 	MAXLEN	EQU	BUFFEND-BUFFER	
110	.
115	.       SUBROUTINE TO READ RECORD INFO BUFFER
120	.
125	00027	0		USE		
130	00027	0	RDREC	CLEAR	X	
135	00029	0		CLEAR	A	
140	0002B	0		CLEAR	S	
145	0002D	0		+LDT	#MAXLEN	
150	00031	0	RLOOP	TD	INPUT	
155	00034	0		JEQ	RLOOP	
160	00037	0		RD	INPUT	
165	0003A	0		COMPR	A,S	
170	0003C	0		JEQ	EXIT	
175	0003F	0		STCH	BUFFER,X	
180	00042	0		TIXR	T	
185	00044	0		JLT	RLOOP	
190	00047	0	EXIT	STX	LENGTH	
195	0004A	0		RSUB	 	
200	00006	1		USE	CDATA	
205	00006	1	INPUT	BYTE	X'F1'	
210	.
215	.     SUBROUTINE TO WRITE RECORD FROM BUFFER
220	.
225	0004D	0		USE		
230	0004D	0	WRREC	CLEAR	X	
235	0004F	0		LDT	LENGTH	
240	00052	0	WLOOP	TD	=X'05'	
245	00055	0		JEQ	WLOOP	
250	00058	0		LDCH	BUFFER,X	
255	0005B	0		WD	=X'05'	
260	0005E	0		TIXR	T	
265	00060	0		JLT	WLOOP	
270	00063	0		RSUB	 	
275	00007	1		USE	CDATA	
280	00007	1		LTORG	 	
285	00007	1	*	=C'EOF'	 	 
290	0000A	1	*	=X'05'	 	 
295	00066	 		END	FIRST	
